# 修論発表スライド
## タイトル
安全なコード移動が可能なコード生成言語の型システムの設計と実装
発表時間：20分
質疑応答：8分

### メモ
早めにこの研究の肝，面白いところを伝えたい

ソフトウェア学会並の詳しさで大丈夫？
* 型推論のところを主に説明したい

## 構成
* この修論で達成したこと
* 問題点
* どう解決したか
  * アイデア
  * 実装とかの例とか出せれば良い

## ストーリー
### こういうことがしたい want
* コードの移動がしたい

### 準備 background 2分
* 多段階let 挿入

* コード生成 + s0/r0 で実現

### 問題点 problem 4分
* scope extrusion
* コード移動をすると，評価前と評価後でスコープの順番が変わる

### 目的 aim
### 概要 abst 1分
* コード生成言語に s0/r0を入れた言語の作成
および
* コントロールオペレータによるコード移動を **安全に** 行うための型システム，型推論アルゴリズムの開発

### 解決策 how 4分
* 須藤らの体系をもとに，ECを用いた型システムを作る

* 須藤らの研究
    * 副作用とコード生成を組み合わせた場合に発生する scope extrusion は,
      未束縛の変数が,あ るべき範囲の外側に染み出してしまうという問題だった.
      そこで,コードレベルのラムダ抽 象 λ_ x. e の x の型が,
      固有変数条件を満たさなければならないという制約を加え,この問題を 解決することとした.
* EC付きの型システムの説明

* union を導入

### 解決方法 do 4分
* 型システムの説明
* sigma-part answer タイプ

### 実際のところ 2分
* 型付けの例

### したこと
* 型推論
* 制約生成
* 制約解消

### まとめ conc 1分


## 内容 20分-18分
keywords: let挿入 コード生成 s0/r0 EC union
### 概要 0.5分
  * プログラムを生成するプログラム(コード生成)の安全性を保証
  * コード生成における効率的なプログラム技法のひとつである多段階let 挿入を安全に扱うための型システムを構築

### 準備 3分
  * コード生成の例
  * shift0/reset0を用いることで，多段階let挿入が可能となることの例

### **問題 4分**
  * let 挿入行うコード例 エラーとなるような例を出して，
    この例には型をつけたい，この例には型がつかないようにしたい
    * 一般にコード生成の前の段階で安全なコードかどうかを判断したい -> コンパクトにいう
  * 以下技術的なこと
  * 先行研究のEC を利用したスコープ表現を用いる型システムの導入をする．
  しかし，多段階let挿入を行うとコード内のスコープの範囲が逆転してしまう．

### **解決方法 6分**
  * 多段階let 挿入を実現するために s0/r0を導入
  * ECに対して， union を導入することで，スコープの範囲の逆転に対応 ここまでが中間発表と説明

### やったこと，できること 5分
  * T_1 での型付け例
    * 手で型付けはできないので，型推論をしたい
  * 型推論アルゴリズムの導入(制約生成，制約解消) (T_1 ではなぜできないか．すべての場所でsubsumption を使う必要なく，バックトラックの必要なくトップレベルの項が与えられれば一意的に適用する型付け規則が決まるようなT_2 を作成) T_1 からT_2 をどう変換したかの例
  * T_2とは制約生成用，subsumption をくっつけたもの(一意的にしたいから)
  * 型，sigma-part のsubsumption についてのディスカッション(sigma-partの説明はしてないのでここはこういう問題もあったのを口で説明？) -> やめる
  * 制約解消
  * (型推論例は必要っぽい？)
  * 実装は，制約生成までした．(制約解消はまだ)

### まとめ 1分

### appendix 質問用
  * shift/reset と shift0/reset0 の違い

  * どれくらい調べたの？
    * バインダーを行ったり来たり，飛び越えたりするのが，重要．
    変数束縛のところに関係するものについては調べてる．それが本質的．
    * いくつか調べておく
    * let をたくさんネストさせるようなコード例を動かしたりするかも

* 質問に対しての返答は対策をする
  * T_1 とT_2 の同値性についてなど
  T_2 に対しては subsumption を機械的に型付け規則につけている
  T_2 のフォーマルな同値性については証明はしていないが．
