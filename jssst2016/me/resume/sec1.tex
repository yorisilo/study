% section 1

\section{はじめに}
コード生成法は，プログラムの生産性・保守性と実行性能の高さを両立させら
れるプログラミング手法として有力なものである．
本研究は，コード生成法で必要とされる「多段階let挿入」等を簡潔に表現で
きるコントロールオペレータである shift0/reset0を持つコード生成言語とそ
の型システムを構築し，生成されたコードの型安全性を静的に保証する言語体
系および型システムを設計する．
これにより，コード生成器のコンパイル段階，すなわち，実際にコードが生成
されてコンパイルされるより遥かに前の段階でのエラーの検出が可能となると
いう利点がある．

コード生成におけるlet挿入は，生成されたコードを移動して効率良いコード
に変形するための機能であり，ループ不変式をforループの外側に移動したり，
コードの計算結果を共有するなどのコード変換(コード最適化)において必要な機能である．
多段階let挿入は，入れ子になったforループ等を飛び越えて，コードを移動す
る機能である．

% ここでいう安全性は，構文的に正しいプログラムであること，
% 文字列同士の加算や乗算を決して行わない等の通常の型安全性を満たすことのほか，
% 自由変数やプログラム特化後において利用できない変数に依存したプログラム
% を生成しないという，変数や変数スコープに関する性質を含む概念である．

% この研究での大きな課題は，従来のコード生成のためのプログラミング言語の多くが，純粋なラムダ計算に基づく関数型プログラミング言語を基礎としており，効率の良いコードを生成する多くの技法をカバーしていないことである．これを克服する体系，すなわち，効率良いプログラムを記述するための表現力を高めつつ，安全性が保証された体系が求められている．

本研究は，
多段階let挿入を可能とするコード生成体系の構築のため，
比較的最近になって理論的性質が解明されたshift0/reset0\cite{Materzok2011} という
コントロールオペレータに着目する．
このコントロールオペレータに対する型規則を適切に設計することにより，
型安全性を解決することを目的とする．
コントロールオペレータを含む項の計算について分析した結果、
スコープの包含関係が逆転することや2つのスコープの合流があることから、
変数スコープを表す識別子にジョイン(和集合)を追加すればよいという着想を
得て、型システムを設計することに成功した。

本研究に関連した従来研究としては，
束縛子を越えない範囲でのコントロールオペレータを許した研究や，
局所的な代入可能変数を持つ体系に対する須藤らの研究\cite{Sudo2014}，
後者を，グローバルな代入可能変数を持つ体系に拡張した研究
\cite{Aplas2016}などがある．
しかし，いずれの研究でも 多段階のforループを飛び越えたlet挿入は許していない．
本研究は，須藤らの研究をベースに，
shift0/reset0 を持つコード生成体系を設計した点に新規性がある．
